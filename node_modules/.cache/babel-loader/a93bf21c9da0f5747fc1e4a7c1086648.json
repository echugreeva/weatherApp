{"ast":null,"code":"var _jsxFileName = \"/Users/elenachugreeva/Documents/DI-Bootcamp-Stage1/DI_JS_pt/week18/heroloweatherproject/src/components/OneDay.js\",\n  _s = $RefreshSig$();\nimport { useContext, useState, useEffect } from 'react';\nimport { AppContext } from '../App';\nimport OneChange from './OneChange';\nimport OneDaysEx from './OneDayWeatherEx';\nimport { addToLocalStorage, getFromLocalStorage } from \"../helpers/localStorage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OneDay = _ref => {\n  _s();\n  let {\n    keyC,\n    keyF,\n    city,\n    country\n  } = _ref;\n  const [oneDay, setDay] = useState(OneDaysEx);\n  const {\n    chosen,\n    favKeys,\n    setFav\n  } = useContext(AppContext);\n  console.log(chosen.key, chosen.city, chosen.country);\n  console.log(`oneday component props` + keyC + keyF + city + country);\n  let toFetch;\n  if (window.location.href.indexOf(\"favorites\") > -1) {\n    toFetch = keyF;\n    console.log(toFetch);\n  } else {\n    toFetch = chosen.key;\n    console.log(toFetch);\n  }\n  const fetchWeather = id => {\n    fetch(`http://dataservice.accuweather.com/currentconditions/v1/${id}?apikey=lBHawUgG9LRqS3TZNMPItFBx1VH87wIt`).then(res => res.json()).then(data => {\n      console.log(data);\n      setDay(data);\n    }).catch(err => {\n      console.log(err);\n    });\n    //  setDay(OneChange)\n  };\n\n  let iconId;\n  if (oneDay[0].WeatherIcon < 9) {\n    iconId = \"0\" + oneDay[0].WeatherIcon.toString();\n  } else {\n    iconId = oneDay[0].WeatherIcon;\n  }\n  let imgSrc = `https://developer.accuweather.com/sites/default/files/${iconId}-s.png`;\n  useEffect(() => {\n    fetchWeather(toFetch);\n    console.log(`oneday fetched weather`);\n  }, [chosen, favKeys]);\n  if (window.location.href.indexOf(\"favorites\") > -1) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [country, \", \", city, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Temperature: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [oneDay[0].Temperature.Metric.Value, \" C\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: imgSrc\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: oneDay[0].WeatherText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this)]\n    }, keyF, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this);\n  } else if (!chosen.key) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"no city is chosen\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"center w-100 w-40-m w-20-ns h-25 pa2 hidden ba br3 b--light-purple shadow-3 mv4\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [chosen.country, \", \", chosen.city]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Temperature: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [oneDay[0].Temperature.Metric.Value, \" C\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: imgSrc\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: oneDay[0].WeatherText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"f6 grow no-underline br-pill b--dark-green ba bw2 ph3 pv2 mb2 dib dark-green\",\n        onClick: () => {\n          let favorite = getFromLocalStorage('favorites') || [];\n          favorite.push(chosen);\n          console.log(chosen);\n          addToLocalStorage('favorites', favorite);\n          // console.log(favorite)\n        },\n        children: \"Add to Favorite\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this);\n  }\n};\n_s(OneDay, \"yghCxApQMmOCbV6U1Oz4DWZE60M=\");\n_c = OneDay;\nexport default OneDay;\nvar _c;\n$RefreshReg$(_c, \"OneDay\");","map":{"version":3,"names":["useContext","useState","useEffect","AppContext","OneChange","OneDaysEx","addToLocalStorage","getFromLocalStorage","OneDay","keyC","keyF","city","country","oneDay","setDay","chosen","favKeys","setFav","console","log","key","toFetch","window","location","href","indexOf","fetchWeather","id","fetch","then","res","json","data","catch","err","iconId","WeatherIcon","toString","imgSrc","Temperature","Metric","Value","WeatherText","favorite","push"],"sources":["/Users/elenachugreeva/Documents/DI-Bootcamp-Stage1/DI_JS_pt/week18/heroloweatherproject/src/components/OneDay.js"],"sourcesContent":["import { useContext, useState, useEffect } from 'react'\nimport { AppContext } from '../App'\nimport OneChange from './OneChange';\nimport OneDaysEx from './OneDayWeatherEx'\nimport { addToLocalStorage, getFromLocalStorage } from \"../helpers/localStorage\";\n\nconst OneDay = ({ keyC, keyF, city, country }) => {\n\n    const [oneDay, setDay] = useState(OneDaysEx)\n\n    const {chosen, favKeys, setFav} = useContext(AppContext)\n    \n\n    console.log(chosen.key, chosen.city, chosen.country);\n    console.log(`oneday component props` + keyC + keyF + city + country)\n    let toFetch;\n    if (window.location.href.indexOf(\"favorites\") > -1) {\n        toFetch = keyF\n        console.log(toFetch)\n    } else {\n        toFetch = chosen.key\n        console.log(toFetch)\n    }\n\n\n    const fetchWeather = (id) => {\n        fetch(\n            `http://dataservice.accuweather.com/currentconditions/v1/${id}?apikey=lBHawUgG9LRqS3TZNMPItFBx1VH87wIt`\n        )\n            .then((res) => res.json())\n            .then((data) => {\n                console.log(data);\n                setDay(data);\n            })\n            .catch((err) => {\n                console.log(err)\n            })\n        //  setDay(OneChange)\n\n    }\n    let iconId;\n    if (oneDay[0].WeatherIcon < 9) {\n        iconId = \"0\" + oneDay[0].WeatherIcon.toString()\n    } else {\n        iconId = oneDay[0].WeatherIcon\n    }\n\n    let imgSrc = `https://developer.accuweather.com/sites/default/files/${iconId}-s.png`\n\n\n\n    useEffect(() => {\n        fetchWeather(toFetch)\n        console.log(`oneday fetched weather`)\n    }, [chosen, favKeys])\n\n    if (window.location.href.indexOf(\"favorites\") > -1) {\n\n        return (\n            <div key={keyF}>\n                <p>{country}, {city} </p>\n                <p>Temperature: </p>\n                <p>{oneDay[0].Temperature.Metric.Value} C</p>\n                <img src={imgSrc} />\n                <p>{oneDay[0].WeatherText}</p>\n\n            </div>\n        )\n    } else if (!chosen.key) {\n\n        return (\n            <div>no city is chosen</div>\n        )\n    }\n\n    else {\n        return (\n            <div className='center w-100 w-40-m w-20-ns h-25 pa2 hidden ba br3 b--light-purple shadow-3 mv4'>\n                <p>{chosen.country}, {chosen.city}</p>\n                <p>Temperature: </p>\n                <p>{oneDay[0].Temperature.Metric.Value} C</p>\n                <img src={imgSrc} />\n                <p>{oneDay[0].WeatherText}</p>\n                {/* <button>test</button>  */}\n                <button className='f6 grow no-underline br-pill b--dark-green ba bw2 ph3 pv2 mb2 dib dark-green' onClick={() => {\n                    let favorite = getFromLocalStorage('favorites') || [];\n                    favorite.push(chosen);\n                    console.log(chosen)\n                    addToLocalStorage('favorites', favorite)\n                    // console.log(favorite)\n                }}\n                >Add to Favorite</button>\n            </div>\n        )\n    }\n\n\n}\n\nexport default OneDay"],"mappings":"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"},"metadata":{},"sourceType":"module"}