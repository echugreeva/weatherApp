{"ast":null,"code":"var _jsxFileName = \"/Users/elenachugreeva/Documents/DI-Bootcamp-Stage1/DI_JS_pt/week18/heroloweatherproject/src/components/OneDay.js\",\n  _s = $RefreshSig$();\nimport { useContext, useState, useEffect } from 'react';\nimport { AppContext } from '../App';\nimport OneChange from './OneChange';\nimport OneDaysEx from './OneDayWeatherEx';\nimport { addToLocalStorage, getFromLocalStorage } from \"../helpers/localStorage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OneDay = _ref => {\n  _s();\n  let {\n    keyC,\n    keyF,\n    city,\n    country\n  } = _ref;\n  const [favKeys, setFav] = useState(getFromLocalStorage('favorites') || []);\n  const [oneDay, setDay] = useState(OneDaysEx);\n  const {\n    chosen\n  } = useContext(AppContext);\n  console.log(chosen.key, chosen.city, chosen.country);\n  console.log(`oneday component props` + keyC + keyF + city + country);\n  let toFetch;\n  if (window.location.href.indexOf(\"favorites\") > -1) {\n    toFetch = keyF;\n    console.log(toFetch);\n  } else {\n    toFetch = chosen.key;\n    console.log(toFetch);\n  }\n  const fetchWeather = id => {\n    fetch(`http://dataservice.accuweather.com/currentconditions/v1/${id}?apikey=lBHawUgG9LRqS3TZNMPItFBx1VH87wIt`).then(res => res.json()).then(data => {\n      console.log(data);\n      setDay(data);\n    }).catch(err => {\n      console.log(err);\n    });\n    //  setDay(OneChange)\n  };\n\n  let iconId;\n  if (oneDay[0].WeatherIcon < 9) {\n    iconId = \"0\" + oneDay[0].WeatherIcon.toString();\n  } else {\n    iconId = oneDay[0].WeatherIcon;\n  }\n  let imgSrc = `https://developer.accuweather.com/sites/default/files/${iconId}-s.png`;\n  useEffect(() => {\n    fetchWeather(toFetch);\n    console.log(`oneday fetched weather`);\n  }, []);\n  if (window.location.href.indexOf(\"favorites\") > -1) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"center w-20 h5 pa2 hidden ba br3 b--light-purple shadow-3 mv4 bg-lightest-blue\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [country, \", \", city, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Temperature: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [oneDay[0].Temperature.Metric.Value, \" C\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: imgSrc\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: oneDay[0].WeatherPhrase\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          favKeys.splice(favKeys.indexOf(item), 1);\n          addToLocalStorage('favorites', favKeys);\n          setFav(getFromLocalStorage('favorites'));\n        },\n        children: \"Remove from favorites\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this);\n  } else if (!chosen.key) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"no city is chosen\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"center mw4 mw-ns hidden ba mv4 bg-lightest-blue\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [chosen.country, \", \", chosen.city]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Temperature: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [oneDay[0].Temperature.Metric.Value, \" C\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: imgSrc\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: oneDay[0].WeatherText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this);\n  }\n};\n_s(OneDay, \"687VhqaTkTePCR6jv/l5bgGWWy4=\");\n_c = OneDay;\nexport default OneDay;\nvar _c;\n$RefreshReg$(_c, \"OneDay\");","map":{"version":3,"names":["useContext","useState","useEffect","AppContext","OneChange","OneDaysEx","addToLocalStorage","getFromLocalStorage","OneDay","keyC","keyF","city","country","favKeys","setFav","oneDay","setDay","chosen","console","log","key","toFetch","window","location","href","indexOf","fetchWeather","id","fetch","then","res","json","data","catch","err","iconId","WeatherIcon","toString","imgSrc","Temperature","Metric","Value","WeatherPhrase","splice","item","WeatherText"],"sources":["/Users/elenachugreeva/Documents/DI-Bootcamp-Stage1/DI_JS_pt/week18/heroloweatherproject/src/components/OneDay.js"],"sourcesContent":["import {useContext, useState, useEffect} from 'react'\nimport {AppContext} from '../App'\nimport OneChange from './OneChange';\nimport OneDaysEx from './OneDayWeatherEx'\nimport { addToLocalStorage, getFromLocalStorage } from \"../helpers/localStorage\";\n\n\nconst OneDay = ({keyC, keyF, city, country})  => {\n    const [favKeys, setFav] = useState(getFromLocalStorage('favorites')|| [])\n    const [oneDay, setDay] = useState(OneDaysEx)\n\n    const {chosen} = useContext(AppContext)\n    \n    console.log(chosen.key, chosen.city , chosen.country);\n     console.log(`oneday component props`+ keyC + keyF + city + country)\n     let toFetch;\n     if(window.location.href.indexOf(\"favorites\") > -1) {\n        toFetch = keyF\n        console.log(toFetch)\n     } else {\n        toFetch = chosen.key\n        console.log(toFetch)\n     }\n     \n\n    const fetchWeather = (id) => {\n        fetch(\n            `http://dataservice.accuweather.com/currentconditions/v1/${id}?apikey=lBHawUgG9LRqS3TZNMPItFBx1VH87wIt`\n          )\n            .then((res) => res.json())\n            .then((data) => {\n                console.log(data);\n                setDay(data);\n            })\n            .catch((err) => {\n                console.log(err)\n            })\n        //  setDay(OneChange)\n    \n    }\n    let iconId;\n    if(oneDay[0].WeatherIcon<9) {\n        iconId = \"0\" + oneDay[0].WeatherIcon.toString()\n    } else {\n        iconId = oneDay[0].WeatherIcon\n    }\n\n    let imgSrc = `https://developer.accuweather.com/sites/default/files/${iconId}-s.png`\n    \n    \n    \n     useEffect(()=>{\n        fetchWeather(toFetch)\n        console.log(`oneday fetched weather`)\n     },[])\n\n    if (window.location.href.indexOf(\"favorites\") > -1) {\n\n        return (\n        <div className='center w-20 h5 pa2 hidden ba br3 b--light-purple shadow-3 mv4 bg-lightest-blue'>\n                <p>{country}, {city} </p>\n                <p>Temperature: </p>\n                    <p>{oneDay[0].Temperature.Metric.Value} C</p>\n                <img src={imgSrc}/>\n                <p>{oneDay[0].WeatherPhrase}</p>   \n                <button onClick = {()=>{\n                                                favKeys.splice(favKeys.indexOf(item), 1);\n                                                addToLocalStorage('favorites', favKeys);\n                                                setFav(getFromLocalStorage('favorites'))\n                                            }}>Remove from favorites</button>\n                \n        </div>\n        )\n    } else if (!chosen.key) {\n        \n            return (\n                <div>no city is chosen</div>\n            )\n    }\n    \n     else {\n        return (\n            <div className='center mw4 mw-ns hidden ba mv4 bg-lightest-blue'>\n                <p>{chosen.country}, {chosen.city}</p>\n                 <p>Temperature: </p>\n                    <p>{oneDay[0].Temperature.Metric.Value} C</p>\n                <img src={imgSrc}/>\n                <p>{oneDay[0].WeatherText}</p>   \n                \n            </div>\n        )\n    }\n    \n    \n}\n\nexport default OneDay"],"mappings":"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"},"metadata":{},"sourceType":"module"}